<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Enter License Key</title>
</head>

<body>
  <script type="text/javascript">
    const ipc = require('electron').ipcRenderer

    sendSerialInfo = () => {
      var email = document.getElementById('email').value.toLowerCase()
      var serial = document.getElementById('serial').value.toUpperCase()
      ipc.send('serial', [email, serial])
    }

    ipc.on('serial-info', (e,d) => {
      document.getElementById('email').value = d[0]
      document.getElementById('serial').value = d[1]
    })

    ipc.on('serial-success', () => {
      alert('Thank you for contribution!')
      window.onbeforeunload = undefined
      this.close()
    })
    ipc.on('serial-fail', () => {
      alert('Invalid serial.\nPlease try again.')
    })
    ipc.on('prevent-close', () => {
      window.onbeforeunload = (e) => {
        e.returnValue = false
      }
    })

  </script>

  <form>
    <input id="email" style="display:block;width:380px;font-size:150%;" autofocus/>
    <input id="serial" style="display:block;width:380px;font-size:150%;" autofocus/>
    <button type="submit" onclick="sendSerialInfo()" style="margin-top:5px;font-size:100%">Submit</button>
  </form>
</body>
</html>
