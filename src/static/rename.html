<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Rename Document</title>
  <link rel="stylesheet" href="modal.css">
<style>
body {
  background-color: lightgray;
  padding: 20px;
}
</style>
</head>

<body>
  <script type="text/javascript">
    const {remote, ipcRenderer} = require('electron')

    let winRename = remote.getCurrentWindow()
    let currentName = winRename.currentName
    let dbName = winRename.dbName
    let closeDocument = winRename.closeDocument;
    let docNameInput

    window.onload = function() {
      docNameInput = document.getElementById('documentName')
      docNameInput.value = currentName
      docNameInput.select()

      if(!closeDocument) {
        document.getElementById('discard').remove();
      }
    }

    window.onsubmit = function () {
      ipcRenderer.send('rename:renamed', dbName, docNameInput.value, closeDocument)
      this.close()
    }

    discard = function() {
      if(confirm("Are you sure you want to delete your work?\nThere is NO UNDO.")) {
        ipcRenderer.send('rename:delete-and-close', dbName)
        this.close()
      }
    }
  </script>

  <form>
    <label for="documentName">Enter a new name for the document:</label>
    <input id="documentName" style="display:block;width:410px;margin-top:6px;font-size:150%;" autofocus/>
    <div id="buttons" class="dialog-buttons">
      <a id="discard" onclick="discard();">Discard changes</a>
      <button id="rename" type="submit">Ok</button>
    </div>
  </form>
</body>
</html>
